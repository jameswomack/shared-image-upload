<html>
<head>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/siofu/client.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const socket = io.connect()
      const uploader = new SocketIOFileUpload(socket)
      uploader.listenOnInput(document.getElementById('siofu_input'))
      socket.addEventListener('show', e => {
        const file = e.file

        if (!file) return

        const name = file.name

        const preview = document.querySelector('img')
        preview.src = encodeURIComponent('/' + name)
      })
    })
  </script>
</head>
<body>
<section>
<form>
<label>Upload an image: <input type="file" id="siofu_input" name="siofu_input" /></label>
</form>
</section>
<section><img alt="preview" /></section>
</body>
</html>
